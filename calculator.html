<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Web Calculator</title>
<style>
  body {
    font-family: "Poppins", sans-serif;
    background: #c3e8f5;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  .calculator {
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 5px 20px rgba(179, 127, 127, 0.2);
    width: 330px;
    padding: 20px;
    position: relative;
    transition: all 0.3s ease;
  }

  .menu {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 22px;
    cursor: pointer;
    user-select: none;
  }

  .submenu {
    display: none;
    position: absolute;
    top: 35px;
    right: 15px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    animation: fadeIn 0.3s ease;
    overflow: hidden;
  }

  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(-10px);}
    to {opacity: 1; transform: translateY(0);}
  }

  .submenu button {
    background: none;
    border: none;
    width: 100%;
    text-align: left;
    padding: 10px 15px;
    font-size: 14px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .submenu button:hover {
    background: #f1f1f1;
  }

  #display {
    width: 100%;
    height: 60px;
    background: #f9f9f9;
    border: none;
    border-radius: 10px;
    text-align: right;
    padding: 10px;
    font-size: 22px;
    margin-top: 15px;
    margin-bottom: 15px;
  }

  .buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
  }

  button {
    height: 50px;
    border: none;
    border-radius: 10px;
    font-size: 18px;
    cursor: pointer;
    transition: transform 0.2s, background 0.2s;
  }

  button:hover {
    transform: scale(1.05);
  }

  .num {
    background: #de9dee;
    color: white;
  }

  .op {
    background: #dcbde6;
    color: white;
  }

  .clear {
    grid-column: span 4;
    background: #e9caca;
    color: white;
  }

  .equal {
    background: #e7b5f1;
    color: white;
  }

  .hidden-section {
    display: none;
    margin-top: 15px;
    background: #f9f9f9;
    border-radius: 10px;
    padding: 10px;
    animation: fadeIn 0.3s ease;
  }

  .hidden-section input {
    width: 90%;
    margin-bottom: 8px;
  }

  #history {
    max-height: 120px;
    overflow-y: auto;
    background: #f1f1f1;
    border-radius: 10px;
    padding: 10px;
    margin-top: 10px;
    font-size: 14px;
  }

  .history-item {
    margin-bottom: 5px;
  }

  .clear-history {
    background: #e2a8a8;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 5px 10px;
    margin-top: 8px;
    cursor: pointer;
  }

</style>
</head>
<body>

<div class="calculator">
  <div class="menu" id="menu">⋮</div>
  <div class="submenu" id="submenu">
    <button id="scientificBtn">Scientific Mode</button>
    <button id="unitBtn">Unit Conversion</button>
    <button id="currencyBtn">Currency Conversion</button>
    <button id="historyBtn">History</button>
  </div>

  <input type="text" id="display" readonly value="0">

  <div class="buttons">
    <button class="num" onclick="appendValue('7')">7</button>
    <button class="num" onclick="appendValue('8')">8</button>
    <button class="num" onclick="appendValue('9')">9</button>
    <button class="op" onclick="appendValue('/')">÷</button>

    <button class="num" onclick="appendValue('4')">4</button>
    <button class="num" onclick="appendValue('5')">5</button>
    <button class="num" onclick="appendValue('6')">6</button>
    <button class="op" onclick="appendValue('*')">×</button>

    <button class="num" onclick="appendValue('1')">1</button>
    <button class="num" onclick="appendValue('2')">2</button>
    <button class="num" onclick="appendValue('3')">3</button>
    <button class="op" onclick="appendValue('-')">−</button>

    <button class="num" onclick="appendValue('0')">0</button>
    <button class="num" onclick="appendValue('.')">.</button>
    <button class="equal" onclick="calculate()">=</button>
    <button class="op" onclick="appendValue('+')">+</button>

    <button class="clear" onclick="clearDisplay()">C</button>
  </div>

  <!-- Scientific Mode -->
  <div class="hidden-section" id="scientific">
    <button onclick="applySci('sqrt')">√</button>
    <button onclick="applySci('pow')">x²</button>
    <button onclick="applySci('sin')">sin</button>
    <button onclick="applySci('cos')">cos</button>
    <button onclick="applySci('tan')">tan</button>
    <button onclick="applySci('log')">log</button>
    <button onclick="applySci('exp')">exp</button>
    <button onclick="insertConst('π')">π</button>
    <button onclick="insertConst('e')">e</button>
  </div>

  <!-- Unit Conversion -->
<div class="hidden-section" id="unit">
  <input type="number" id="unitInput" placeholder="Enter value">
  <select id="unitType">
    <option value="mToFt">Meters → Feet</option>
    <option value="ftToM">Feet → Meters</option>
    <option value="kgToLb">Kilograms → Pounds</option>
    <option value="lbToKg">Pounds → Kilograms</option>
    <option value="cToF">Celsius → Fahrenheit</option>
    <option value="fToC">Fahrenheit → Celsius</option>
    <option value="kmToMi">Kilometers → Miles</option>
    <option value="miToKm">Miles → Kilometers</option>
  </select>
  <button onclick="convertUnit()">Convert</button>
  <p id="unitResult"></p>
</div>


  <!-- Currency Conversion -->
  <div class="hidden-section" id="currency">
    <input type="number" id="currInput" placeholder="Enter USD">
    <button onclick="convertCurrency()">Convert to PKR</button>
    <p id="currResult"></p>
  </div>

  <!-- History -->
  <div class="hidden-section" id="history">
    <div id="historyList"></div>
    <button class="clear-history" onclick="clearHistory()">Clear History</button>
  </div>
</div>

<script>
const display = document.getElementById('display');
const submenu = document.getElementById('submenu');
const menu = document.getElementById('menu');
const historyList = document.getElementById('historyList');
let history = [];

menu.onclick = () => {
  submenu.style.display = submenu.style.display === "block" ? "none" : "block";
};

function appendValue(val) {
  if (display.value === "0") display.value = val;
  else display.value += val;
}

function clearDisplay() {
  display.value = "0";
}

function calculate() {
  try {
    let result = eval(display.value);
    history.push(`${display.value} = ${result}`);
    updateHistory();
    display.value = result;
  } catch {
    display.value = "Error";
  }
}

// Scientific Functions
function applySci(type) {
  let val = parseFloat(display.value);
  if (isNaN(val)) return;
  switch (type) {
    case 'sqrt': display.value = Math.sqrt(val); break;
    case 'pow': display.value = Math.pow(val, 2); break;
    case 'sin': display.value = Math.sin(val).toFixed(4); break;
    case 'cos': display.value = Math.cos(val).toFixed(4); break;
    case 'tan': display.value = Math.tan(val).toFixed(4); break;
    case 'log': display.value = Math.log10(val).toFixed(4); break;
    case 'exp': display.value = Math.exp(val).toFixed(4); break;
  }
}

function insertConst(symbol) {
  if (symbol === 'π') display.value = Math.PI;
  if (symbol === 'e') display.value = Math.E;
}

// Unit Conversion
function convertUnit() {
  let val = parseFloat(document.getElementById('unitInput').value);
  let type = document.getElementById('unitType').value;
  let result = '';

  if (isNaN(val)) {
    document.getElementById('unitResult').innerText = "Please enter a valid number!";
    return;
  }

  switch (type) {
    case 'mToFt': result = `${(val * 3.28084).toFixed(2)} feet`; break;
    case 'ftToM': result = `${(val / 3.28084).toFixed(2)} meters`; break;
    case 'kgToLb': result = `${(val * 2.20462).toFixed(2)} pounds`; break;
    case 'lbToKg': result = `${(val / 2.20462).toFixed(2)} kilograms`; break;
    case 'cToF': result = `${((val * 9/5) + 32).toFixed(2)} °F`; break;
    case 'fToC': result = `${((val - 32) * 5/9).toFixed(2)} °C`; break;
    case 'kmToMi': result = `${(val * 0.621371).toFixed(2)} miles`; break;
    case 'miToKm': result = `${(val / 0.621371).toFixed(2)} kilometers`; break;
  }

  document.getElementById('unitResult').innerText = result;
}


// Currency Conversion
function convertCurrency() {
  let usd = parseFloat(document.getElementById('currInput').value);
  const rate = 280;
  if (!isNaN(usd)) {
    document.getElementById('currResult').innerText = `${(usd * rate).toFixed(2)} PKR`;
  }
}

// History
function updateHistory() {
  historyList.innerHTML = history.map(item => `<div class='history-item'>${item}</div>`).join('');
}

function clearHistory() {
  history = [];
  updateHistory();
}

// Submenu options
document.getElementById('scientificBtn').onclick = () => toggleSection('scientific');
document.getElementById('unitBtn').onclick = () => toggleSection('unit');
document.getElementById('currencyBtn').onclick = () => toggleSection('currency');
document.getElementById('historyBtn').onclick = () => toggleSection('history');

function toggleSection(id) {
  ['scientific', 'unit', 'currency', 'history'].forEach(sec => {
    document.getElementById(sec).style.display = sec === id ?
      (document.getElementById(sec).style.display === "block" ? "none" : "block") : "none";
  });
  submenu.style.display = "none";
}
</script>
</body>
</html>
